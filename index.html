<!DOCTYPE html>
<html>
<head>
  <title>自動ログイン中</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    function initializeLiff() {
      liff.init({ liffId: "2005512061-wvxpAxeY" }).then(() => {
        if (liff.isLoggedIn()) {
          liff.getProfile().then(profile => {
            const userId = profile.userId;
            window.location.href = "https://script.google.com/macros/s/AKfycbwEcXsDIL3_FW8RPQ3eSbEXhJLTw6PBMka17Ub7PLsn_MgZcmm36UvlP2ooZT_SmLwz/exec?lineuserid=" + userId;
          }).catch(err => {
            console.error('Error getting profile:', err);
          });
        } else {
          liff.login();
        }
      }).catch(err => {
        console.error('LIFF initialization failed:', err);
      });
    }
    
    window.onload = function() {
      initializeLiff();
    };
  </script>
</head>
<body>
  <h1>sorairoサービスに自動ログインしています。自動でログインされない場合は、開き直してください。</h1>
</body>
</html>
